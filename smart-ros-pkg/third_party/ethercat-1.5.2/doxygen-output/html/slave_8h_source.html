<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>IgH EtherCAT Master: slave.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">IgH EtherCAT Master
   &#160;<span id="projectnumber">1.5.2</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('slave_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">slave.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="slave_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> *</span>
<a name="l00003"></a>00003 <span class="comment"> *  $Id: slave.h,v ec403cf308eb 2013/02/12 14:46:43 fp $</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  Copyright (C) 2006-2012  Florian Pose, Ingenieurgemeinschaft IgH</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> *  This file is part of the IgH EtherCAT Master.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> *  The IgH EtherCAT Master is free software; you can redistribute it and/or</span>
<a name="l00010"></a>00010 <span class="comment"> *  modify it under the terms of the GNU General Public License version 2, as</span>
<a name="l00011"></a>00011 <span class="comment"> *  published by the Free Software Foundation.</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> *  The IgH EtherCAT Master is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General</span>
<a name="l00016"></a>00016 <span class="comment"> *  Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> *  You should have received a copy of the GNU General Public License along</span>
<a name="l00019"></a>00019 <span class="comment"> *  with the IgH EtherCAT Master; if not, write to the Free Software</span>
<a name="l00020"></a>00020 <span class="comment"> *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
<a name="l00021"></a>00021 <span class="comment"> *</span>
<a name="l00022"></a>00022 <span class="comment"> *  ---</span>
<a name="l00023"></a>00023 <span class="comment"> *</span>
<a name="l00024"></a>00024 <span class="comment"> *  The license mentioned above concerns the source code only. Using the</span>
<a name="l00025"></a>00025 <span class="comment"> *  EtherCAT technology and brand is only permitted in compliance with the</span>
<a name="l00026"></a>00026 <span class="comment"> *  industrial property and similar rights of Beckhoff Automation GmbH.</span>
<a name="l00027"></a>00027 <span class="comment"> *</span>
<a name="l00028"></a>00028 <span class="comment"> *****************************************************************************/</span>
<a name="l00029"></a>00029 
<a name="l00035"></a>00035 <span class="comment">/*****************************************************************************/</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#ifndef __EC_SLAVE_H__</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#define __EC_SLAVE_H__</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;linux/list.h&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;linux/kobject.h&gt;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="globals_8h.html" title="Global definitions and macros.">globals.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="datagram_8h.html" title="EtherCAT datagram structure.">datagram.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="pdo_8h.html" title="EtherCAT Process data object structure.">pdo.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="sync_8h.html" title="EtherCAT sync manager.">sync.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="sdo_8h.html" title="EtherCAT CANopen SDO structure.">sdo.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="fsm__slave_8h.html" title="EtherCAT slave request state machine.">fsm_slave.h</a>&quot;</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="comment">/*****************************************************************************/</span>
<a name="l00051"></a>00051 
<a name="l00062"></a><a class="code" href="slave_8h.html#af7d7537e5ba790ca327223cb92318eed">00062</a> <span class="preprocessor">#define EC_SLAVE_INFO(slave, fmt, args...) \</span>
<a name="l00063"></a>00063 <span class="preprocessor">    printk(KERN_INFO &quot;EtherCAT %u-%u: &quot; fmt, slave-&gt;master-&gt;index, \</span>
<a name="l00064"></a>00064 <span class="preprocessor">            slave-&gt;ring_position, ##args)</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00076"></a><a class="code" href="slave_8h.html#a39519c3172e4196e40fa9006fb801612">00076</a> <span class="preprocessor">#define EC_SLAVE_ERR(slave, fmt, args...) \</span>
<a name="l00077"></a>00077 <span class="preprocessor">    printk(KERN_ERR &quot;EtherCAT ERROR %u-%u: &quot; fmt, slave-&gt;master-&gt;index, \</span>
<a name="l00078"></a>00078 <span class="preprocessor">            slave-&gt;ring_position, ##args)</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00090"></a><a class="code" href="slave_8h.html#aae2995e6509df66255d8f7fcdb5eb5bb">00090</a> <span class="preprocessor">#define EC_SLAVE_WARN(slave, fmt, args...) \</span>
<a name="l00091"></a>00091 <span class="preprocessor">    printk(KERN_WARNING &quot;EtherCAT WARNING %u-%u: &quot; fmt, \</span>
<a name="l00092"></a>00092 <span class="preprocessor">            slave-&gt;master-&gt;index, slave-&gt;ring_position, ##args)</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span>
<a name="l00106"></a><a class="code" href="slave_8h.html#a349fb5dcd0bac7fc2324d3da89aa4751">00106</a> <span class="preprocessor">#define EC_SLAVE_DBG(slave, level, fmt, args...) \</span>
<a name="l00107"></a>00107 <span class="preprocessor">    do { \</span>
<a name="l00108"></a>00108 <span class="preprocessor">        if (slave-&gt;master-&gt;debug_level &gt;= level) { \</span>
<a name="l00109"></a>00109 <span class="preprocessor">            printk(KERN_DEBUG &quot;EtherCAT DEBUG %u-%u: &quot; fmt, \</span>
<a name="l00110"></a>00110 <span class="preprocessor">                    slave-&gt;master-&gt;index, slave-&gt;ring_position, ##args); \</span>
<a name="l00111"></a>00111 <span class="preprocessor">        } \</span>
<a name="l00112"></a>00112 <span class="preprocessor">    } while (0)</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span>
<a name="l00114"></a>00114 <span class="comment">/*****************************************************************************/</span>
<a name="l00115"></a>00115 
<a name="l00118"></a><a class="code" href="structec__slave__port__t.html">00118</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00119"></a><a class="code" href="structec__slave__port__t.html#ae10a313d7421e3b4b7924c295075fc9c">00119</a>     <a class="code" href="group__ApplicationInterface.html#ga15640cfae27efdf73d687ea4f9a03338" title="EtherCAT slave port descriptor.">ec_slave_port_desc_t</a> <a class="code" href="structec__slave__port__t.html#ae10a313d7421e3b4b7924c295075fc9c" title="Port descriptors.">desc</a>; 
<a name="l00120"></a><a class="code" href="structec__slave__port__t.html#ad29b2a093c816ae85986cf5fb9e9d6dd">00120</a>     <a class="code" href="structec__slave__port__link__t.html" title="EtherCAT slave port information.">ec_slave_port_link_t</a> <a class="code" href="structec__slave__port__t.html#ad29b2a093c816ae85986cf5fb9e9d6dd" title="Port link status.">link</a>; 
<a name="l00121"></a><a class="code" href="structec__slave__port__t.html#aa3ffc650817b6ca241bae9a9232f055d">00121</a>     <a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *<a class="code" href="structec__slave__port__t.html#aa3ffc650817b6ca241bae9a9232f055d" title="Connected slaves.">next_slave</a>; 
<a name="l00122"></a><a class="code" href="structec__slave__port__t.html#a4e7c3832a518186c4f1a5bc32a192eb9">00122</a>     uint32_t receive_time; 
<a name="l00124"></a><a class="code" href="structec__slave__port__t.html#ad9c8ad9fc7ebd5681eb72951b1716cc5">00124</a>     uint32_t delay_to_next_dc; 
<a name="l00126"></a>00126 } <a class="code" href="structec__slave__port__t.html" title="Slave port.">ec_slave_port_t</a>;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 <span class="comment">/*****************************************************************************/</span>
<a name="l00129"></a>00129 
<a name="l00132"></a><a class="code" href="structec__sii__t.html">00132</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00133"></a>00133     <span class="comment">// Non-category data</span>
<a name="l00134"></a><a class="code" href="structec__sii__t.html#a1f222ffbedb48380a833e94fe9a08a8b">00134</a>     uint16_t <a class="code" href="structec__sii__t.html#a1f222ffbedb48380a833e94fe9a08a8b" title="Configured station alias.">alias</a>; 
<a name="l00135"></a><a class="code" href="structec__sii__t.html#ad185baf2f7711424507c20f6e96b7014">00135</a>     uint32_t <a class="code" href="structec__sii__t.html#ad185baf2f7711424507c20f6e96b7014" title="Vendor ID.">vendor_id</a>; 
<a name="l00136"></a><a class="code" href="structec__sii__t.html#a69a301c8203300eddd299807a617ad03">00136</a>     uint32_t <a class="code" href="structec__sii__t.html#a69a301c8203300eddd299807a617ad03" title="Vendor-specific product code.">product_code</a>; 
<a name="l00137"></a><a class="code" href="structec__sii__t.html#aa79fdd16cea2f20a85510260d76005b2">00137</a>     uint32_t <a class="code" href="structec__sii__t.html#aa79fdd16cea2f20a85510260d76005b2" title="Revision number.">revision_number</a>; 
<a name="l00138"></a><a class="code" href="structec__sii__t.html#a439dea178e64634c3821493384d8d9e1">00138</a>     uint32_t <a class="code" href="structec__sii__t.html#a439dea178e64634c3821493384d8d9e1" title="Serial number.">serial_number</a>; 
<a name="l00139"></a><a class="code" href="structec__sii__t.html#abdcbea468841ca94492bae78207b1282">00139</a>     uint16_t <a class="code" href="structec__sii__t.html#abdcbea468841ca94492bae78207b1282" title="Bootstrap receive mailbox address.">boot_rx_mailbox_offset</a>; 
<a name="l00140"></a><a class="code" href="structec__sii__t.html#aa5e4828a5bb2ea45194de12fe48608ed">00140</a>     uint16_t <a class="code" href="structec__sii__t.html#aa5e4828a5bb2ea45194de12fe48608ed" title="Bootstrap receive mailbox size.">boot_rx_mailbox_size</a>; 
<a name="l00141"></a><a class="code" href="structec__sii__t.html#a91d2fc76e5e4b634e130aa9e51e71bfc">00141</a>     uint16_t <a class="code" href="structec__sii__t.html#a91d2fc76e5e4b634e130aa9e51e71bfc" title="Bootstrap transmit mailbox address.">boot_tx_mailbox_offset</a>; 
<a name="l00142"></a><a class="code" href="structec__sii__t.html#a65ead35255e661f345c9d15033347b10">00142</a>     uint16_t <a class="code" href="structec__sii__t.html#a65ead35255e661f345c9d15033347b10" title="Bootstrap transmit mailbox size.">boot_tx_mailbox_size</a>; 
<a name="l00143"></a><a class="code" href="structec__sii__t.html#a0172b2d04dcbc56d75abc1efa76dd392">00143</a>     uint16_t <a class="code" href="structec__sii__t.html#a0172b2d04dcbc56d75abc1efa76dd392" title="Standard receive mailbox address.">std_rx_mailbox_offset</a>; 
<a name="l00144"></a><a class="code" href="structec__sii__t.html#abcdfe5aa59f2fcbf9deaa4d1a9c954fe">00144</a>     uint16_t <a class="code" href="structec__sii__t.html#abcdfe5aa59f2fcbf9deaa4d1a9c954fe" title="Standard receive mailbox size.">std_rx_mailbox_size</a>; 
<a name="l00145"></a><a class="code" href="structec__sii__t.html#aa5c8f21c36995d272bc456266e035815">00145</a>     uint16_t <a class="code" href="structec__sii__t.html#aa5c8f21c36995d272bc456266e035815" title="Standard transmit mailbox address.">std_tx_mailbox_offset</a>; 
<a name="l00146"></a><a class="code" href="structec__sii__t.html#a47eb676cee305c53f5fec378bc95c68d">00146</a>     uint16_t <a class="code" href="structec__sii__t.html#a47eb676cee305c53f5fec378bc95c68d" title="Standard transmit mailbox size.">std_tx_mailbox_size</a>; 
<a name="l00147"></a><a class="code" href="structec__sii__t.html#a7740732efd267741b956b8912502d8a1">00147</a>     uint16_t <a class="code" href="structec__sii__t.html#a7740732efd267741b956b8912502d8a1" title="Supported mailbox protocols.">mailbox_protocols</a>; 
<a name="l00149"></a>00149     <span class="comment">// Strings</span>
<a name="l00150"></a><a class="code" href="structec__sii__t.html#a74ade311e8937d005c486a1a68cd8744">00150</a>     <span class="keywordtype">char</span> **<a class="code" href="structec__sii__t.html#a74ade311e8937d005c486a1a68cd8744" title="Strings in SII categories.">strings</a>; 
<a name="l00151"></a><a class="code" href="structec__sii__t.html#a4bfc0157c4dfaad31b7330aa5f515c5a">00151</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structec__sii__t.html#a4bfc0157c4dfaad31b7330aa5f515c5a" title="Number of SII strings.">string_count</a>; 
<a name="l00153"></a>00153     <span class="comment">// General</span>
<a name="l00154"></a><a class="code" href="structec__sii__t.html#ac9a082bcb14f1d40aa7a2ee278a4a912">00154</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structec__sii__t.html#ac9a082bcb14f1d40aa7a2ee278a4a912" title="General category present.">has_general</a>; 
<a name="l00155"></a><a class="code" href="structec__sii__t.html#a0ac2c5757ef583a6b3e8a8c0ddffbd9f">00155</a>     <span class="keywordtype">char</span> *<a class="code" href="structec__sii__t.html#a0ac2c5757ef583a6b3e8a8c0ddffbd9f" title="Group name.">group</a>; 
<a name="l00156"></a><a class="code" href="structec__sii__t.html#a505df193133b999f2c073260648b5359">00156</a>     <span class="keywordtype">char</span> *<a class="code" href="structec__sii__t.html#a505df193133b999f2c073260648b5359" title="Image name.">image</a>; 
<a name="l00157"></a><a class="code" href="structec__sii__t.html#a26e505154880d387b75d4d9f52181223">00157</a>     <span class="keywordtype">char</span> *<a class="code" href="structec__sii__t.html#a26e505154880d387b75d4d9f52181223" title="Order number.">order</a>; 
<a name="l00158"></a><a class="code" href="structec__sii__t.html#ae4a7f50f715570d1cbfce538ab7828d9">00158</a>     <span class="keywordtype">char</span> *<a class="code" href="structec__sii__t.html#ae4a7f50f715570d1cbfce538ab7828d9" title="Slave name.">name</a>; 
<a name="l00159"></a><a class="code" href="structec__sii__t.html#afa995764cc295a2de209b27f2ac07f85">00159</a>     uint8_t physical_layer[<a class="code" href="group__ApplicationInterface.html#ga1982934cef716e45eefeba57c9d6e3ff" title="Maximum number of slave ports.">EC_MAX_PORTS</a>]; 
<a name="l00160"></a><a class="code" href="structec__sii__t.html#a7896df4d79afdb971b9817d41fbb847e">00160</a>     <a class="code" href="structec__sii__coe__details__t.html" title="Slave information interface CANopen over EtherCAT details flags.">ec_sii_coe_details_t</a> <a class="code" href="structec__sii__t.html#a7896df4d79afdb971b9817d41fbb847e" title="CoE detail flags.">coe_details</a>; 
<a name="l00161"></a><a class="code" href="structec__sii__t.html#a7ff70e83d0e1870bc344218f53f85aaf">00161</a>     <a class="code" href="structec__sii__general__flags__t.html" title="Slave information interface general flags.">ec_sii_general_flags_t</a> <a class="code" href="structec__sii__t.html#a7ff70e83d0e1870bc344218f53f85aaf" title="General flags.">general_flags</a>; 
<a name="l00162"></a><a class="code" href="structec__sii__t.html#a67585e573f37806a5c34923354874838">00162</a>     int16_t <a class="code" href="structec__sii__t.html#a67585e573f37806a5c34923354874838" title="Power consumption in mA.">current_on_ebus</a>; 
<a name="l00164"></a>00164     <span class="comment">// SyncM</span>
<a name="l00165"></a><a class="code" href="structec__sii__t.html#a1cfcfe4bdca850f302cbb8938affa7b9">00165</a>     <a class="code" href="structec__sync__t.html" title="Sync manager.">ec_sync_t</a> *<a class="code" href="structec__sii__t.html#a1cfcfe4bdca850f302cbb8938affa7b9" title="SYNC MANAGER categories.">syncs</a>; 
<a name="l00166"></a><a class="code" href="structec__sii__t.html#add5337cd03f09660a3bfe91e4047ed2c">00166</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structec__sii__t.html#add5337cd03f09660a3bfe91e4047ed2c" title="Number of sync managers.">sync_count</a>; 
<a name="l00168"></a>00168     <span class="comment">// [RT]XPDO</span>
<a name="l00169"></a><a class="code" href="structec__sii__t.html#a769c826981c5b3d1ee52245131537b15">00169</a>     <span class="keyword">struct </span>list_head pdos; 
<a name="l00170"></a>00170 } <a class="code" href="structec__sii__t.html" title="Slave information interface data.">ec_sii_t</a>;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 <span class="comment">/*****************************************************************************/</span>
<a name="l00173"></a>00173 
<a name="l00176"></a><a class="code" href="structec__slave.html">00176</a> <span class="keyword">struct </span><a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave</a>
<a name="l00177"></a>00177 {
<a name="l00178"></a><a class="code" href="structec__slave.html#ae3ca485627d212610814bf4e0130eddd">00178</a>     <a class="code" href="structec__master.html" title="EtherCAT master.">ec_master_t</a> *<a class="code" href="structec__slave.html#ae3ca485627d212610814bf4e0130eddd" title="Master owning the slave.">master</a>; 
<a name="l00179"></a><a class="code" href="structec__slave.html#adc17b41384e235c98b39f4ac49319d68">00179</a>     <a class="code" href="globals_8h.html#ad1a2101422888687598d7e1a630c6343" title="Master devices.">ec_device_index_t</a> <a class="code" href="structec__slave.html#adc17b41384e235c98b39f4ac49319d68" title="Index of device the slave responds on.">device_index</a>; 
<a name="l00182"></a>00182     <span class="comment">// addresses</span>
<a name="l00183"></a><a class="code" href="structec__slave.html#a337a538c53fb9ac8bcfb951fd445e0a1">00183</a>     uint16_t <a class="code" href="structec__slave.html#a337a538c53fb9ac8bcfb951fd445e0a1" title="Ring position.">ring_position</a>; 
<a name="l00184"></a><a class="code" href="structec__slave.html#ae4c26b32979bcb21cf391ca3b170d701">00184</a>     uint16_t <a class="code" href="structec__slave.html#ae4c26b32979bcb21cf391ca3b170d701" title="Configured station address.">station_address</a>; 
<a name="l00185"></a><a class="code" href="structec__slave.html#a954d95e8464b5dcb7084463d00760291">00185</a>     uint16_t <a class="code" href="structec__slave.html#a954d95e8464b5dcb7084463d00760291" title="Effective alias address.">effective_alias</a>; 
<a name="l00187"></a><a class="code" href="structec__slave.html#a0dc49f089a749f49fcce90007063ed85">00187</a>     <a class="code" href="structec__slave__port__t.html" title="Slave port.">ec_slave_port_t</a> <a class="code" href="structec__slave.html#a0dc49f089a749f49fcce90007063ed85" title="Ports.">ports</a>[<a class="code" href="group__ApplicationInterface.html#ga1982934cef716e45eefeba57c9d6e3ff" title="Maximum number of slave ports.">EC_MAX_PORTS</a>]; 
<a name="l00189"></a>00189     <span class="comment">// configuration</span>
<a name="l00190"></a><a class="code" href="structec__slave.html#a35616766fc7afbd4fc0b8a5d5a652bf7">00190</a>     <a class="code" href="structec__slave__config.html" title="EtherCAT slave configuration.">ec_slave_config_t</a> *<a class="code" href="structec__slave.html#a35616766fc7afbd4fc0b8a5d5a652bf7" title="Current configuration.">config</a>; 
<a name="l00191"></a><a class="code" href="structec__slave.html#af81c1abd2ac2b8a5a5bfbbfe7d79ce70">00191</a>     <a class="code" href="globals_8h.html#a0e9c38c7520909d649fac451046dcde0" title="State of an EtherCAT slave.">ec_slave_state_t</a> <a class="code" href="structec__slave.html#af81c1abd2ac2b8a5a5bfbbfe7d79ce70" title="Requested application state.">requested_state</a>; 
<a name="l00192"></a><a class="code" href="structec__slave.html#a6214f41ec1dce05b67b298b89a49e1f8">00192</a>     <a class="code" href="globals_8h.html#a0e9c38c7520909d649fac451046dcde0" title="State of an EtherCAT slave.">ec_slave_state_t</a> <a class="code" href="structec__slave.html#a6214f41ec1dce05b67b298b89a49e1f8" title="Current application state.">current_state</a>; 
<a name="l00193"></a><a class="code" href="structec__slave.html#aef33c89d3974546f5aed153b379d0d24">00193</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structec__slave.html#aef33c89d3974546f5aed153b379d0d24" title="Stop processing after an error.">error_flag</a>; 
<a name="l00194"></a><a class="code" href="structec__slave.html#a0baba2f1593708191871119e3570655f">00194</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structec__slave.html#a0baba2f1593708191871119e3570655f" title="Force (re-)configuration.">force_config</a>; 
<a name="l00195"></a><a class="code" href="structec__slave.html#a885011c3377eacc3513c7806db9ea4d4">00195</a>     uint16_t <a class="code" href="structec__slave.html#a885011c3377eacc3513c7806db9ea4d4" title="Configured receive mailbox offset.">configured_rx_mailbox_offset</a>; 
<a name="l00197"></a><a class="code" href="structec__slave.html#a0310afbbf38da2a92cdbe3911a46535c">00197</a>     uint16_t <a class="code" href="structec__slave.html#a0310afbbf38da2a92cdbe3911a46535c" title="Configured receive mailbox size.">configured_rx_mailbox_size</a>; 
<a name="l00199"></a><a class="code" href="structec__slave.html#a365e2116bd54803112c56cb3a98970cb">00199</a>     uint16_t <a class="code" href="structec__slave.html#a365e2116bd54803112c56cb3a98970cb" title="Configured send mailbox offset.">configured_tx_mailbox_offset</a>; 
<a name="l00201"></a><a class="code" href="structec__slave.html#a79ecaa06844f2b8bf2d1b4d9bfae9207">00201</a>     uint16_t <a class="code" href="structec__slave.html#a79ecaa06844f2b8bf2d1b4d9bfae9207" title="Configured send mailbox size.">configured_tx_mailbox_size</a>; 
<a name="l00203"></a>00203     <span class="comment">// base data</span>
<a name="l00204"></a><a class="code" href="structec__slave.html#a942db00c8dc12ba78cd124b353945301">00204</a>     uint8_t <a class="code" href="structec__slave.html#a942db00c8dc12ba78cd124b353945301" title="Slave type.">base_type</a>; 
<a name="l00205"></a><a class="code" href="structec__slave.html#a5346100cbd1fa0187ae3074d4a75d3cc">00205</a>     uint8_t <a class="code" href="structec__slave.html#a5346100cbd1fa0187ae3074d4a75d3cc" title="Revision.">base_revision</a>; 
<a name="l00206"></a><a class="code" href="structec__slave.html#afd680b0cb700169c2a97aa38c0fd0552">00206</a>     uint16_t <a class="code" href="structec__slave.html#afd680b0cb700169c2a97aa38c0fd0552" title="Build number.">base_build</a>; 
<a name="l00207"></a><a class="code" href="structec__slave.html#a45adb760f44d08fcab9c81d6022e0bad">00207</a>     uint8_t <a class="code" href="structec__slave.html#a45adb760f44d08fcab9c81d6022e0bad" title="Number of supported FMMUs.">base_fmmu_count</a>; 
<a name="l00208"></a><a class="code" href="structec__slave.html#aa4d67d55717398c4f25d379ede390d5d">00208</a>     uint8_t <a class="code" href="structec__slave.html#aa4d67d55717398c4f25d379ede390d5d" title="Number of supported sync managers.">base_sync_count</a>; 
<a name="l00209"></a><a class="code" href="structec__slave.html#a39d39fe2e87602de4629cfbdb0106929">00209</a>     uint8_t <a class="code" href="structec__slave.html#a39d39fe2e87602de4629cfbdb0106929" title="FMMU bit operation is supported.">base_fmmu_bit_operation</a>; 
<a name="l00210"></a><a class="code" href="structec__slave.html#a2b02f5e40a79f9b6213dde898a10b873">00210</a>     uint8_t <a class="code" href="structec__slave.html#a2b02f5e40a79f9b6213dde898a10b873" title="Distributed clocks are supported.">base_dc_supported</a>; 
<a name="l00211"></a><a class="code" href="structec__slave.html#a8bc5c82a2467c31b4c427fe4c56cb544">00211</a>     <a class="code" href="globals_8h.html#a5cbf78c1663f1a9ba4d69b816bcd00f7" title="EtherCAT slave distributed clocks range.">ec_slave_dc_range_t</a> <a class="code" href="structec__slave.html#a8bc5c82a2467c31b4c427fe4c56cb544" title="DC range.">base_dc_range</a>; 
<a name="l00212"></a><a class="code" href="structec__slave.html#a65fba9aad1f196c6c43ba7dceecc15dd">00212</a>     uint8_t <a class="code" href="structec__slave.html#a65fba9aad1f196c6c43ba7dceecc15dd" title="The slave supports the DC system time register.">has_dc_system_time</a>; 
<a name="l00215"></a><a class="code" href="structec__slave.html#a0e5d719413436f927eba7320ee565125">00215</a>     uint32_t <a class="code" href="structec__slave.html#a0e5d719413436f927eba7320ee565125" title="DC system time transmission delay (offset from reference clock).">transmission_delay</a>; 
<a name="l00218"></a>00218     <span class="comment">// SII</span>
<a name="l00219"></a><a class="code" href="structec__slave.html#a3886920f38a9b5a97c1d50f3c08e989a">00219</a>     uint16_t *<a class="code" href="structec__slave.html#a3886920f38a9b5a97c1d50f3c08e989a" title="Complete SII image.">sii_words</a>; 
<a name="l00220"></a><a class="code" href="structec__slave.html#a9b6ee3261f586d6c30647b1494da0f57">00220</a>     <span class="keywordtype">size_t</span> <a class="code" href="structec__slave.html#a9b6ee3261f586d6c30647b1494da0f57" title="Size of the SII contents in words.">sii_nwords</a>; 
<a name="l00222"></a>00222     <span class="comment">// Slave information interface</span>
<a name="l00223"></a><a class="code" href="structec__slave.html#a081433f5a30f9352fbc4363093ae1e16">00223</a>     <a class="code" href="structec__sii__t.html" title="Slave information interface data.">ec_sii_t</a> <a class="code" href="structec__slave.html#a081433f5a30f9352fbc4363093ae1e16" title="Extracted SII data.">sii</a>; 
<a name="l00225"></a><a class="code" href="structec__slave.html#a2754265971634ba5f97ce28fc1029d58">00225</a>     <span class="keyword">struct </span>list_head <a class="code" href="structec__slave.html#a2754265971634ba5f97ce28fc1029d58" title="SDO dictionary list.">sdo_dictionary</a>; 
<a name="l00226"></a><a class="code" href="structec__slave.html#a94732ef500405ce3afa15f6aeef4918d">00226</a>     uint8_t <a class="code" href="structec__slave.html#a94732ef500405ce3afa15f6aeef4918d" title="Dictionary has been fetched.">sdo_dictionary_fetched</a>; 
<a name="l00227"></a><a class="code" href="structec__slave.html#af177795f6287be576f617772d18e3dee">00227</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="structec__slave.html#af177795f6287be576f617772d18e3dee" title="Time, the slave went to PREOP.">jiffies_preop</a>; 
<a name="l00229"></a><a class="code" href="structec__slave.html#a6cbec4e34923f5b25fecdbd166a8328a">00229</a>     <span class="keyword">struct </span>list_head <a class="code" href="structec__slave.html#a6cbec4e34923f5b25fecdbd166a8328a" title="SDO access requests.">sdo_requests</a>; 
<a name="l00230"></a><a class="code" href="structec__slave.html#a614562e4df0afc3707515ae9f1df0ffc">00230</a>     <span class="keyword">struct </span>list_head <a class="code" href="structec__slave.html#a614562e4df0afc3707515ae9f1df0ffc" title="Register access requests.">reg_requests</a>; 
<a name="l00231"></a><a class="code" href="structec__slave.html#a374ce6a1879d81ca54496be994b9e46e">00231</a>     <span class="keyword">struct </span>list_head <a class="code" href="structec__slave.html#a374ce6a1879d81ca54496be994b9e46e" title="FoE write requests.">foe_requests</a>; 
<a name="l00232"></a><a class="code" href="structec__slave.html#a85daad41c4862aa0de137a3c927abac8">00232</a>     <span class="keyword">struct </span>list_head <a class="code" href="structec__slave.html#a85daad41c4862aa0de137a3c927abac8" title="SoE write requests.">soe_requests</a>; 
<a name="l00234"></a><a class="code" href="structec__slave.html#aecb677b730d579c8eeeaa83a432a74a8">00234</a>     <a class="code" href="structec__fsm__slave.html" title="Finite state machine of an EtherCAT slave.">ec_fsm_slave_t</a> <a class="code" href="structec__slave.html#aecb677b730d579c8eeeaa83a432a74a8" title="Slave state machine.">fsm</a>; 
<a name="l00235"></a>00235 };
<a name="l00236"></a>00236 
<a name="l00237"></a>00237 <span class="comment">/*****************************************************************************/</span>
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 <span class="comment">// slave construction/destruction</span>
<a name="l00240"></a>00240 <span class="keywordtype">void</span> <a class="code" href="slave_8c.html#aaa689baba7cb590080c92bcf5a851739" title="Slave constructor.">ec_slave_init</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, <a class="code" href="structec__master.html" title="EtherCAT master.">ec_master_t</a> *, <a class="code" href="globals_8h.html#ad1a2101422888687598d7e1a630c6343" title="Master devices.">ec_device_index_t</a>,
<a name="l00241"></a>00241         uint16_t, uint16_t);
<a name="l00242"></a>00242 <span class="keywordtype">void</span> <a class="code" href="slave_8c.html#a35196c41a9d7b6a559c23d805690470d" title="Slave destructor.">ec_slave_clear</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *);
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 <span class="keywordtype">void</span> <a class="code" href="slave_8c.html#a3c51205f3e69c449d29acf98f607f92d" title="Clear the sync manager array.">ec_slave_clear_sync_managers</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 <span class="keywordtype">void</span> <a class="code" href="slave_8c.html#a040121dc73fd21f4a212e59574d17231" title="Request a slave state and resets the error flag.">ec_slave_request_state</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, <a class="code" href="globals_8h.html#a0e9c38c7520909d649fac451046dcde0" title="State of an EtherCAT slave.">ec_slave_state_t</a>);
<a name="l00247"></a>00247 <span class="keywordtype">void</span> <a class="code" href="slave_8c.html#a6aa74f1d2d7abaa28ae2e0c19a1aa176" title="Sets the application state of a slave.">ec_slave_set_state</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, <a class="code" href="globals_8h.html#a0e9c38c7520909d649fac451046dcde0" title="State of an EtherCAT slave.">ec_slave_state_t</a>);
<a name="l00248"></a>00248 
<a name="l00249"></a>00249 <span class="comment">// SII categories</span>
<a name="l00250"></a>00250 <span class="keywordtype">int</span> <a class="code" href="slave_8c.html#a84cd41dd5ad5e78951374f0f13f0a41b" title="Fetches data from a STRING category.">ec_slave_fetch_sii_strings</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, <span class="keyword">const</span> uint8_t *, <span class="keywordtype">size_t</span>);
<a name="l00251"></a>00251 <span class="keywordtype">int</span> <a class="code" href="slave_8c.html#a9b77f41feca39ff647be54226d2ebde2" title="Fetches data from a GENERAL category.">ec_slave_fetch_sii_general</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, <span class="keyword">const</span> uint8_t *, <span class="keywordtype">size_t</span>);
<a name="l00252"></a>00252 <span class="keywordtype">int</span> <a class="code" href="slave_8c.html#a90611548a89eeb3ce927ea0435a1fedc" title="Fetches data from a SYNC MANAGER category.">ec_slave_fetch_sii_syncs</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, <span class="keyword">const</span> uint8_t *, <span class="keywordtype">size_t</span>);
<a name="l00253"></a>00253 <span class="keywordtype">int</span> <a class="code" href="slave_8c.html#a49e67c5363a9cf60622d9652c18be120" title="Fetches data from a [RT]xPDO category.">ec_slave_fetch_sii_pdos</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, <span class="keyword">const</span> uint8_t *, <span class="keywordtype">size_t</span>,
<a name="l00254"></a>00254         <a class="code" href="group__ApplicationInterface.html#ga703c4e47384b3601e7605d6d910aaba1" title="Direction type for PDO assignment functions.">ec_direction_t</a>);
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 <span class="comment">// misc.</span>
<a name="l00257"></a>00257 <a class="code" href="structec__sync__t.html" title="Sync manager.">ec_sync_t</a> *<a class="code" href="slave_8c.html#a0a1f1035888d33dcd86a5ca5a5f3acc2" title="Get the sync manager given an index.">ec_slave_get_sync</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, uint8_t);
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="keywordtype">void</span> <a class="code" href="slave_8c.html#a71f0aaad16f5c15460df80b86887afbb" title="Counts the total number of SDOs and entries in the dictionary.">ec_slave_sdo_dict_info</a>(<span class="keyword">const</span> <a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *,
<a name="l00260"></a>00260         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *);
<a name="l00261"></a>00261 <a class="code" href="structec__sdo.html" title="CANopen SDO.">ec_sdo_t</a> *<a class="code" href="slave_8c.html#a3f675c490b5e91d155227e8c8d36bf76" title="Get an SDO from the dictionary.">ec_slave_get_sdo</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, uint16_t);
<a name="l00262"></a>00262 <span class="keyword">const</span> <a class="code" href="structec__sdo.html" title="CANopen SDO.">ec_sdo_t</a> *<a class="code" href="slave_8c.html#aa3d7ea024c8cd9b7d5868a3fde80e977" title="Get an SDO from the dictionary.">ec_slave_get_sdo_const</a>(<span class="keyword">const</span> <a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, uint16_t);
<a name="l00263"></a>00263 <span class="keyword">const</span> <a class="code" href="structec__sdo.html" title="CANopen SDO.">ec_sdo_t</a> *<a class="code" href="slave_8c.html#af0d4badfbc7d6581aa60459bfccde017" title="Get an SDO from the dictionary, given its position in the list.">ec_slave_get_sdo_by_pos_const</a>(<span class="keyword">const</span> <a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, uint16_t);
<a name="l00264"></a>00264 uint16_t <a class="code" href="slave_8c.html#ab4677ac4a4c3ce12aba8f2bdee3a831e" title="Get the number of SDOs in the dictionary.">ec_slave_sdo_count</a>(<span class="keyword">const</span> <a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *);
<a name="l00265"></a>00265 <span class="keyword">const</span> <a class="code" href="structec__pdo__t.html" title="PDO description.">ec_pdo_t</a> *<a class="code" href="slave_8c.html#a52b38cde64ab24790c1a987fa2eac9f5" title="Finds a mapped PDO.">ec_slave_find_pdo</a>(<span class="keyword">const</span> <a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, uint16_t);
<a name="l00266"></a>00266 <span class="keywordtype">void</span> <a class="code" href="slave_8c.html#a659775cbc8fdb6d41fe70eb9298d2780" title="Attach PDO names.">ec_slave_attach_pdo_names</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *);
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="keywordtype">void</span> <a class="code" href="slave_8c.html#a0002f19044a330cebfd3106f443b55e0" title="Calculates the port transmission delays.">ec_slave_calc_port_delays</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *);
<a name="l00269"></a>00269 <span class="keywordtype">void</span> <a class="code" href="slave_8c.html#a4643eda07dbc1eb8afd997fed8d913ca" title="Recursively calculates transmission delays.">ec_slave_calc_transmission_delays_rec</a>(<a class="code" href="structec__slave.html" title="EtherCAT slave.">ec_slave_t</a> *, uint32_t *);
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="comment">/*****************************************************************************/</span>
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="slave_8h.html">slave.h</a>      </li>

    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
